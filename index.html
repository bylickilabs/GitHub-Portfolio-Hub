<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GitHub Portfolio Hub</title>
  <meta name="description" content="GitHub-Portfolio im Dark-Design. DE/EN, Autoload, README-Render, Commits, Repo-Grid, direkte Links, optionaler API-Token mit Persistenz."/>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='black' d='M8 .2a8 8 0 0 0-2.53 15.6c.4.08.55-.18.55-.38v-1.33c-2.24.49-2.71-1.08-2.71-1.08-.36-.92-.88-1.17-.88-1.17-.72-.5.05-.49.05-.49.79.06 1.2.82 1.2.82.71 1.22 1.85.86 2.3.66.07-.52.28-.86.5-1.06-1.79-.2-3.68-.9-3.68-4a3.15 3.15 0 0 1 .84-2.18 2.9 2.9 0 0 1 .08-2.15s.68-.22 2.23.83a7.7 7.7 0 0 1 4.06 0c1.55-1.05 2.23-.83 2.23-.83.34.86.27 1.87.08 2.15.52.57.84 1.31.84 2.18 0 3.1-1.9 3.8-3.7 4 .29.25.54.75.54 1.51v2.24c0 .21.14.46.55.38A8 8 0 0 0 8 .2'/%3E%3C/svg%3E"/>
  <style>
    :root{
      --bg:#0d1117; --panel:#161b22; --elev:#0b0f14; --text:#c9d1d9; --muted:#8b949e;
      --accent:#238636; --accent-2:#1f6feb; --border:#30363d; --warn:#d29922; --danger:#f85149;
      --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#0b121a 30%, var(--bg) 100%);color:var(--text);font:14.5px/1.6 system-ui,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    a{color:var(--accent-2);text-decoration:none}
    a:hover{text-decoration:underline}
    .app{display:grid;grid-template-rows:auto 1fr;min-height:100vh}

    .topbar{display:flex;align-items:center;gap:14px;padding:14px 18px;border-bottom:1px solid var(--border);background:rgba(13,17,23,.9);backdrop-filter:saturate(140%) blur(6px);position:sticky;top:0;z-index:10}
    .octo{width:28px;height:28px;flex:0 0 28px;filter:drop-shadow(0 1px 0 rgba(255,255,255,.08))}
    .brand{font-weight:700;letter-spacing:.2px}
    .spacer{flex:1}
    .stat{font-size:12px;color:var(--muted);border:1px solid var(--border);border-radius:8px;padding:4px 8px}
    .btn{display:inline-grid;place-items:center;border-radius:10px;border:1px solid var(--border);background:linear-gradient(180deg, #1b212a, #121720);color:var(--text);padding:9px 12px;cursor:pointer;transition:transform .05s ease, border-color .2s ease, background .2s;box-shadow:inset 0 1px 0 rgba(255,255,255,.04)}
    .btn:hover{border-color:#3a424b}
    .btn:active{transform:translateY(1px)}
    .btn.ghost{background:transparent}
    .btn.small{padding:6px 9px;border-radius:8px}
    .pill{display:flex;align-items:center;gap:10px;background:var(--panel);border:1px solid var(--border);border-radius:999px;padding:8px 12px}
    .pill input{all:unset;color:var(--text);width:220px}

    @keyframes iPulse{
      0%{ box-shadow:0 0 0 0 rgba(88,166,255,.4); transform:translateY(0) }
      50%{ box-shadow:0 0 0 15px rgba(88,166,255,0); transform:translateY(-1px) }
      100%{ box-shadow:0 0 0 0 rgba(88,166,255,.4); transform:translateY(0) }
    }
    .iBtnLarge{
      position:fixed; top:95px; left:20px; z-index:50;
      width:40px; height:40px; border-radius:50%;
      display:inline-grid; place-items:center;
      border:1px solid var(--border); background:#0e1520; color:#58a6ff; cursor:pointer;
      animation:iPulse 2.2s ease-in-out infinite;
      font-weight:800; font-size:18px;
    }
    .iPopover{
      position:fixed; bottom:72px; left:20px; z-index:51;
      max-width:560px; width:max-content;
      background:linear-gradient(180deg,#0f1520,#0b1017);
      border:1px solid var(--border); border-radius:12px; padding:10px 12px; color:var(--text);
      box-shadow:var(--shadow); display:none;
    }
    .iPopover .title{font-weight:700; margin-bottom:6px}
    .iPopover .desc{color:var(--muted); font-size:13px}
    .kbd{display:inline-grid;place-items:center;border:1px solid var(--border);background:#0b1118;padding:2px 6px;border-radius:6px;font:12px/1.6 ui-monospace, SFMono-Regular, Menlo, monospace}

    .main{display:grid;grid-template-columns:330px 1fr;gap:16px;padding:18px;max-width:1400px;margin:0 auto;width:100%}
    @media (max-width:1100px){.main{grid-template-columns:1fr}}

    .card{background:linear-gradient(180deg, var(--panel), #12161c);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}
    .card .hd{display:flex;align-items:center;gap:10px;justify-content:space-between;padding:16px;border-bottom:1px solid var(--border)}
    .card .bd{padding:16px}

    .profile{position:sticky;top:78px;height:fit-content}
    .avatar{width:96px;height:96px;border-radius:50%;border:1px solid var(--border)}
    .kv{margin:10px 0 0 0;color:var(--muted);font-size:13px}
    .chip{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);background:#0e1520;padding:6px 8px;border-radius:999px;font-size:12px}

    .toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-bottom:10px}
    .input{display:flex;align-items:center;gap:10px;border:1px solid var(--border);background:#0e141b;padding:10px 12px;border-radius:12px}
    .input input{all:unset;color:var(--text);width:260px}
    .grid{display:grid;grid-template-columns:repeat(3, 1fr);gap:12px}
    @media (max-width:1200px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:720px){.grid{grid-template-columns:1fr}}
    .repo{padding:14px;border:1px solid var(--border);border-radius:14px;background:linear-gradient(180deg,#121822,#0c1118);display:flex;flex-direction:column;gap:10px}
    .repo h4{margin:0;font-size:16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .meta{display:flex;flex-wrap:wrap;gap:10px;color:var(--muted);font-size:12px}
    .meta .dot{width:8px;height:8px;border-radius:50%}

    .preview .readme{border:1px solid var(--border);border-radius:12px;padding:16px;background:#0c1118;overflow:auto;max-height:60vh}
    .preview .readme img{max-width:100%}
    .keyvals{display:flex;gap:12px;flex-wrap:wrap}
    .kvbox{flex:1;min-width:160px;border:1px solid var(--border);background:linear-gradient(180deg,#0f141c,#0a0f15);border-radius:12px;padding:12px}
    .kvbox .k{color:var(--muted);font-size:12px}
    .kvbox .v{font-weight:700}

    dialog{border:none;border-radius:18px;background:linear-gradient(180deg,#0f1520,#0b1017);color:var(--text);padding:0;box-shadow:var(--shadow);width:min(880px,92vw)}
    dialog::backdrop{background:rgba(0,0,0,.6)}
    .modal-hd{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid var(--border)}
    .modal-bd{padding:18px}
    .notice{padding:10px 12px;border:1px dashed var(--border);border-radius:12px;background:rgba(255,255,255,.02);color:var(--muted)}
    .error{border:1px solid var(--danger); color:#ffd2cf; background:rgba(248,81,73,.08); padding:8px 10px; border-radius:8px; margin-top:10px}
    .ok{border:1px solid #2ea043; color:#aff5b4; background:rgba(46,160,67,.08); padding:8px 10px; border-radius:8px; margin-top:10px}
	
	@keyframes footerPulse {
	0%   { color: #8b949e; transform: scale(1); }
	50%  { color: #58a6ff; transform: scale(1.05); }
	100% { color: #8b949e; transform: scale(1); }
	}

	.footer {
	position: fixed;
	bottom: 0;
	left: 0;
	width: 100%;
	background: #161b22;
	border-top: 1px solid var(--border);
	color: var(--muted);
	font-size: 18px;
	font-weight: 600;
	padding: 12px 16px;
	text-align: center;
	z-index: 100;
	}

	.footer-content {
	max-width: 1400px;
	margin: 0 auto;
	animation: footerPulse 4s ease-in-out infinite;
	}
  </style>
</head>

<body>
  <div class="app">
    <div class="topbar">
      <svg class="octo" viewBox="0 0 16 16" aria-hidden="true"><path fill="#fff" d="M8 .2a8 8 0 0 0-2.53 15.6c.4.08.55-.18.55-.38v-1.33c-2.24.49-2.71-1.08-2.71-1.08-.36-.92-.88-1.17-.88-1.17-.72-.5.05-.49.05-.49.79.06 1.2.82 1.2.82.71 1.22 1.85.86 2.3.66.07-.52.28-.86.5-1.06-1.79-.2-3.68-.9-3.68-4a3.15 3.15 0 0 1 .84-2.18 2.9 2.9 0 0 1 .08-2.15s.68-.22 2.23.83a7.7 7.7 0 0 1 4.06 0c1.55-1.05 2.23-.83 2.23-.83.34.86.27 1.87.08 2.15.52.57.84 1.31.84 2.18 0 3.1-1.9 3.8-3.7 4 .29.25.54.75.54 1.51v2.24c0 .21.14.46.55.38A8 8 0 0 0 8 .2"/></svg>
      <div class="brand" data-i18n="brand">GitHub Portfolio Hub</div>
      <span class="stat" id="authStat">Auth: OFF</span>
      <span class="stat" id="rateStat">Rate: ‚Äì</span>
      <div class="spacer"></div>

      <div class="pill" title="GitHub Benutzername laden">
        <svg width="16" height="16" aria-hidden="true" viewBox="0 0 16 16"><path fill="#8b949e" d="M10.5 10a4.5 4.5 0 1 0-1 1l3.75 3.75 1-1zM7 11a4 4 0 1 1 0-8 4 4 0 0 1 0 8"/></svg>
        <input id="usernameInput" placeholder="GitHub Nutzername (z.B. bylickilabs)"/>
        <button class="btn small" id="loadBtn" data-i18n="loadBtn">Laden</button>
      </div>

      <button class="btn ghost" id="langBtn" title="Switch language">EN</button>
      <button class="btn ghost" id="infoBtn" data-i18n="info">Info</button>
      <a id="ghLink" class="btn" target="_blank" rel="noopener">GitHub</a>
    </div>

    <div class="main">
      <aside class="card profile" id="profileCard">
        <div class="hd">
          <div style="font-weight:700" data-i18n="profile">Profil</div>
          <div class="chip" title="API Rate Limit">API: <span id="rate">‚Äì</span></div>
        </div>
        <div class="bd">
          <a id="profileLink" href="#" target="_blank" rel="noopener" style="display:flex; gap:14px; align-items:center; text-decoration:none">
            <img id="avatar" class="avatar" alt="Avatar"/>
            <div>
              <div id="fullName" style="font-weight:700;font-size:18px">‚Äì</div>
              <div id="login" style="color:var(--muted)">‚Äì</div>
            </div>
          </a>
          <p id="bio" class="kv" data-i18n="bioHint">Lade dein GitHub Profil, um automatisch Repositories und Metriken zu sehen.</p>
          <div class="keyvals" style="display:flex;gap:12px;flex-wrap:wrap">
            <div class="kvbox"><div class="k" data-i18n="repos">Repos</div><div class="v" id="kv_repos">‚Äì</div></div>
            <div class="kvbox"><div class="k" data-i18n="followers">Follower</div><div class="v" id="kv_followers">‚Äì</div></div>
            <div class="kvbox"><div class="k" data-i18n="following">Following</div><div class="v" id="kv_following">‚Äì</div></div>
          </div>
          <div id="profileError" class="error" style="display:none"></div>
        </div>
      </aside>

      <section class="card">
        <div class="hd">
          <div style="font-weight:700" data-i18n="reposTitle">Repositories</div>
          <div style="display:flex; gap:8px; align-items:center">
            <div class="input" title="Repo-URL einbetten, z. B. https://github.com/OWNER/REPO">
              <svg width="16" height="16" aria-hidden="true" viewBox="0 0 16 16"><path fill="#8b949e" d="M4 4h8v1H4zm0 3h8v1H4zm0 3h5v1H4z"/></svg>
              <input id="repoUrlInput" placeholder="GitHub Repo-URL einf√ºgen ‚Ä¶"/>
              <button class="btn small" id="embedBtn" data-i18n="embedBtn">Einbetten</button>
            </div>
          </div>
        </div>
        <div class="bd">
          <div class="toolbar">
            <div class="input"><input id="search" placeholder="Suche nach Name, Topics‚Ä¶"/></div>
            <select id="languageFilter" class="btn small">
              <option value="" data-i18n="allLangs">Alle Sprachen</option>
            </select>
            <select id="sort" class="btn small">
              <option value="updated" data-i18n="sortUpdated">Sortieren: Zuletzt aktualisiert</option>
              <option value="stars" data-i18n="sortStars">Sortieren: Sterne</option>
              <option value="name" data-i18n="sortName">Sortieren: Name</option>
            </select>
          </div>

          <div id="repoGrid" class="grid" aria-live="polite"></div>

          <hr style="border:0;border-top:1px solid var(--border);margin:16px 0"/>

          <div class="preview">
            <div class="toolbar" style="justify-content:space-between">
              <div id="currentRepoTitle" style="font-weight:700" data-i18n="noRepo">Kein Repository ausgew√§hlt</div>
              <div style="display:flex; gap:8px; align-items:center">
                <a id="openProfileBtn" class="btn small" target="_blank" rel="noopener" data-i18n="viewProfile">Zum Profil</a>
                <a id="openRepoBtn" class="btn small" target="_blank" rel="noopener" data-i18n="viewOnGithub">Auf GitHub ansehen</a>
                <span id="repoMeta" class="notice">‚Äì</span>
              </div>
            </div>

            <div class="keyvals" style="margin-bottom:12px">
              <div class="kvbox"><div class="k">‚≠ê Stars</div><div class="v" id="m_stars">‚Äì</div></div>
              <div class="kvbox"><div class="k">üç¥ Forks</div><div class="v" id="m_forks">‚Äì</div></div>
              <div class="kvbox"><div class="k">üêõ Issues</div><div class="v" id="m_issues">‚Äì</div></div>
              <div class="kvbox"><div class="k" data-i18n="updated">üïí Aktualisiert</div><div class="v" id="m_updated">‚Äì</div></div>
            </div>

            <div id="readme" class="readme" data-i18n-html="readmeHint">
              W√§hle ein Repository, um die README live zu rendern. Hinweis: GitHub blockiert iframes. Diese App l√§dt stattdessen Inhalte √ºber die GitHub API und rendert sie lokal.
            </div>

            <div style="margin-top:12px">
              <div style="font-weight:700;margin-bottom:6px" data-i18n="latestCommits">Letzte Commits</div>
              <div id="commits" class="repo" style="padding:10px"></div>
            </div>

            <div id="repoError" class="error" style="display:none"></div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <button id="iBtn" class="iBtnLarge" aria-haspopup="true" aria-expanded="false" title="Info">i</button>
  <div id="iPopover" class="iPopover" role="dialog" aria-live="polite">
    <div class="title" id="iTitle">Hinweis</div>
    <div class="desc" id="iDesc">
      Ohne Token sind nur <b>60 Requests/Stunde</b> m√∂glich.
      Trage deinen Token im <span class="kbd">Info</span>-Dialog ein, um
      <b>5000 Requests/Stunde</b> zu erhalten.
    </div>
  </div>

  <dialog id="infoModal">
    <div class="modal-hd">
      <div style="font-weight:700" data-i18n="aboutApp">√úber diese Anwendung</div>
      <button class="btn small" id="closeInfo" data-i18n="close">Schlie√üen</button>
    </div>
    <div class="modal-bd">
      <div id="infoContent"></div>
      <hr style="border:0;border-top:1px solid var(--border);margin:14px 0"/>
      <div>
        <label for="tokenInput" style="display:block;margin-bottom:6px"><b data-i18n="tokenLabel">GitHub API-Token (optional)</b></label>
        <div class="input" style="gap:8px">
          <input id="tokenInput" placeholder="ghp_..." style="flex:1">
          <button class="btn small" id="saveToken" data-i18n="saveToken">Speichern</button>
          <button class="btn small" id="clearToken" data-i18n="clearToken">L√∂schen</button>
          <button class="btn small" id="hideToken" data-i18n="hideToken">Ausblenden</button>
        </div>
        <div id="tokenStatus" class="notice" style="margin-top:8px"></div>
      </div>
    </div>
  </dialog>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    const TXT = {
      de: {
        brand:'GitHub Portfolio Hub', loadBtn:'Laden', info:'Info', profile:'Profil',
        bioHint:'Lade dein GitHub Profil, um automatisch Repositories und Metriken zu sehen.',
        repos:'Repos', followers:'Follower', following:'Following',
        reposTitle:'Repositories', embedBtn:'Einbetten', allLangs:'Alle Sprachen',
        sortUpdated:'Sortieren: Zuletzt aktualisiert', sortStars:'Sortieren: Sterne', sortName:'Sortieren: Name',
        noRepo:'Kein Repository ausgew√§hlt', viewOnGithub:'Auf GitHub ansehen', viewProfile:'Zum Profil', updated:'üïí Aktualisiert',
        latestCommits:'Letzte Commits', aboutApp:'√úber diese Anwendung', close:'Schlie√üen',
        readmeHint:'W√§hle ein Repository, um die README live zu rendern. Hinweis: GitHub blockiert iframes. Diese App l√§dt stattdessen Inhalte √ºber die GitHub API und rendert sie lokal.',
        tokenLabel:'GitHub API-Token (optional)', saveToken:'Speichern', clearToken:'L√∂schen', hideToken:'Ausblenden',
        infoHtml:`<p><b>GitHub Portfolio Hub</b> ist ein fokussiertes Frontend im GitHub-Dark-Design. Die App konsolidiert dein √∂ffentliches Entwicklerprofil,
          rendert <span class="kbd">README.md</span> client-seitig, zeigt Live-Metriken (Stars, Forks, Issues) und listet die letzten Commits ‚Äî ohne Backend.</p>
          <h4>Zweck der Anwendung</h4>
          <ul>
            <li>üì£ <b>Portfolio/Branding:</b> Kuratierte, einheitliche Pr√§sentation deiner Repositories.</li>
            <li>üß≠ <b>Schneller Deep-Dive:</b> README, Topics und Commits sofort im Browser.</li>
            <li>üîó <b>Direkte Verlinkung:</b> Profil & Repos per Klick (neuer Tab).</li>
            <li>üåç <b>Mehrsprachig:</b> Vollst√§ndige DE/EN-√úbersetzung der UI.</li>
            <li>‚öôÔ∏è <b>Zero-Backend:</b> L√§uft lokal oder via GitHub Pages als Single-File.</li>
			<br>
			<li>¬©Thorsten Bylicki | ¬©BYLICKILABS</li>
          </ul>
          <h4>API-Hinweise</h4>
          <p>Ohne Token sind Requests auf ca. <b>60/h</b> pro √∂ffentlicher IP limitiert. Mit Token (PAT) stehen dir ca. <b>5000/h</b> zur Verf√ºgung.
          Der Token wird lokal in deinem Browser (localStorage) gespeichert und <u>nicht</u> geteilt.</p>`,
		  
        tokenSaved:'Token gespeichert (localStorage). Authentifizierung aktiv.',
        tokenCleared:'Token entfernt. Authentifizierung aus.',
        tokenHidden:'Token ausgeblendet.',
        errEnterUser:'Bitte GitHub-Benutzername eingeben.',
        errUser:'Benutzer nicht gefunden oder API-Problem.',
        errRepo:'Fehler beim Laden des Repositories.',
        notFound:'Nicht gefunden (404).', rate:'Rate-Limit erreicht (403).', unauth:'Unautorisiert (401).',
        iTitle:'Hinweis',
        iDesc:'Ohne Token sind nur <b>60 Requests/Stunde</b> m√∂glich. Trage deinen Token im <span class="kbd">Info</span>-Dialog ein, um <b>5000 Requests/Stunde</b> zu erhalten.',
        iTooltip:'Kurzinfo zum API-Token',
		footerText: "¬©Thorsten Bylicki | ¬©BYLICKILABS - 17.08.2025 | Entwickelt mit ‚ù§Ô∏è"
      },
      en: {
        brand:'GitHub Portfolio Hub', loadBtn:'Load', info:'Info', profile:'Profile',
        bioHint:'Load your GitHub profile to see repositories and metrics instantly.',
        repos:'Repos', followers:'Followers', following:'Following',
        reposTitle:'Repositories', embedBtn:'Embed', allLangs:'All languages',
        sortUpdated:'Sort: Recently updated', sortStars:'Sort: Stars', sortName:'Sort: Name',
        noRepo:'No repository selected', viewOnGithub:'View on GitHub', viewProfile:'Open Profile', updated:'üïí Updated',
        latestCommits:'Latest commits', aboutApp:'About this app', close:'Close',
        readmeHint:'Select a repository to render its README live. Note: GitHub blocks iframes. This app uses the API and renders locally.',
        tokenLabel:'GitHub API token (optional)', saveToken:'Save', clearToken:'Clear', hideToken:'Hide',
		infoHtml: `<p><b>GitHub Portfolio Hub</b> is a focused frontend in a GitHub-dark design. 
			The app consolidates your public developer profile, renders <span class="kbd">README.md</span> client-side, 
			shows live metrics (Stars, Forks, Issues) and lists the latest commits ‚Äî all without a backend.</p>

			<h4>Purpose of the Application</h4>
		<ul>
			<li>üì£ <b>Portfolio/Branding:</b> Curated, unified presentation of your repositories.</li>
			<li>üß≠ <b>Fast Deep-Dive:</b> README, topics and commits directly in the browser.</li>
			<li>üîó <b>Direct Linking:</b> Open profile & repos with a single click (new tab).</li>
			<li>üåç <b>Multilingual:</b> Full DE/EN translation of the UI.</li>
			<li>‚öôÔ∏è <b>Zero-Backend:</b> Runs locally or via GitHub Pages as a single file.</li>
			<br>
			<li>¬©Thorsten Bylicki | ¬©BYLICKILABS</li>
		</ul>

			<h4>API Notes</h4>
			<p>Without a token, requests are limited to about <b>60/hour</b> per public IP. 
			With a token (PAT) you have about <b>5000/hour</b> available. 
			The token is stored locally in your browser (localStorage) and is <u>not</u> shared.</p>`,
		tokenSaved: 'Token saved (localStorage). Authentication active.',
		tokenCleared: 'Token removed. Authentication off.',
		tokenHidden: 'Token hidden.',
		errEnterUser: 'Please enter a GitHub username.',
		errUser: 'User not found or API issue.',
		errRepo: 'Error loading the repository.',
		notFound: 'Not found (404).',
		rate: 'Rate limit reached (403).',
		unauth: 'Unauthorized (401).',
		iTitle: 'Note',
		iDesc: 'Without a token you only get <b>60 requests/hour</b>. Enter your token in the <span class="kbd">Info</span> dialog to get <b>5000 requests/hour</b>.',
		iTooltip: 'Quick info about the API token',
		footerText: "¬©Thorsten Bylicki | ¬©BYLICKILABS - August 17, 2025 | Developed with ‚ù§Ô∏è"
      }
    };

    let LANG = 'de';
    const $ = (q)=>document.querySelector(q);
    const $$ = (q)=>document.querySelectorAll(q);
    const t = (k)=>TXT[LANG][k]||k;

    function applyI18n(){
      $$('[data-i18n]').forEach(el=> el.textContent = t(el.getAttribute('data-i18n')));
      $$('[data-i18n-html]').forEach(el=> el.innerHTML = t(el.getAttribute('data-i18n-html')));
      $('#usernameInput')?.setAttribute('placeholder', LANG==='de' ? 'GitHub Nutzername (z.B. bylickilabs)' : 'GitHub username (e.g. bylickilabs)');
      $('#repoUrlInput')?.setAttribute('placeholder', LANG==='de' ? 'GitHub Repo-URL einf√ºgen ‚Ä¶' : 'Paste GitHub repo URL ‚Ä¶');
      $('#search')?.setAttribute('placeholder', LANG==='de' ? 'Suche nach Name, Topics‚Ä¶' : 'Search by name, topics‚Ä¶');
      $('#langBtn').textContent = (LANG==='de'?'EN':'DE');
      $('#infoContent').innerHTML = t('infoHtml');
      $('#tokenStatus').textContent = authToken() ? (LANG==='de'?'Token aktiv.':'Token active.') : (LANG==='de'?'Kein Token gesetzt.':'No token set.');
      $('#authStat').textContent = 'Auth: ' + (authToken() ? 'ON' : 'OFF');
      $('#iBtn')?.setAttribute('title', t('iTooltip'));
      $('#iTitle').textContent = t('iTitle');
      $('#iDesc').innerHTML = t('iDesc');
	  $('#footerText').textContent = t('footerText');
    }

    const TOKEN_KEY = 'gh_pat_token';
    const authToken = () => localStorage.getItem(TOKEN_KEY) || '';
    const setToken = (tok) => tok && localStorage.setItem(TOKEN_KEY, tok);
    const clearToken = () => localStorage.removeItem(TOKEN_KEY);

    async function api(path){
      const headers = {'Accept':'application/vnd.github+json'};
      const tok = authToken(); if(tok) headers['Authorization'] = 'token ' + tok;
      const resp = await fetch(`https://api.github.com${path}`, {headers});
      const remaining = resp.headers.get('X-RateLimit-Remaining');
      const limit = resp.headers.get('X-RateLimit-Limit');
      if(remaining && limit){
        $('#rate').textContent = `${remaining}/${limit}`;
        $('#rateStat').textContent = `Rate: ${remaining}/${limit}`;
      }
      if(!resp.ok){
        const status = resp.status;
        let msg = (LANG==='de'?'Fehler: ':'Error: ') + status + ' ' + resp.statusText;
        if(status===404) msg = t('notFound');
        if(status===403) msg = t('rate');
        if(status===401) msg = t('unauth');
        const body = await resp.text().catch(()=> '');
        throw new Error(body ? `${msg} ‚Äì ${body}` : msg);
      }
      return resp.json();
    }

    let STATE = {username:'', profile:null, repos:[], current:null};

    async function loadUser(user){
      hideError('#profileError');
      if(!user){ showError('#profileError', t('errEnterUser')); return; }
      STATE.username = user;
      $('#ghLink').href = `https://github.com/${user}`;
      try{
        const [profile, repos] = await Promise.all([
          api(`/users/${encodeURIComponent(user)}`),
          api(`/users/${encodeURIComponent(user)}/repos?per_page=100&sort=updated`)
        ]);
        STATE.profile = profile; STATE.repos = Array.isArray(repos)?repos:[];
        renderProfile(); renderRepos();
        $('#profileLink').href = profile.html_url || `https://github.com/${user}`;
        $('#openProfileBtn').href = profile.html_url || `https://github.com/${user}`;
      }catch(e){
        showError('#profileError', `${t('errUser')} ${e.message||''}`);
      }
    }

    function renderProfile(){
      const p = STATE.profile; if(!p) return;
      $('#avatar').src = p.avatar_url; $('#avatar').alt = `${p.login} avatar`;
      $('#fullName').textContent = p.name || '‚Äî';
      $('#login').textContent = p.login || '';
      $('#bio').textContent = p.bio || t('bioHint');
      $('#kv_repos').textContent = p.public_repos ?? '0';
      $('#kv_followers').textContent = p.followers ?? '0';
      $('#kv_following').textContent = p.following ?? '0';
      applyI18n();
    }

    function renderRepos(){
      const langs = new Set(); (STATE.repos||[]).forEach(r=> r.language && langs.add(r.language));
      const sel = $('#languageFilter'); const current = sel.value;
      sel.innerHTML = `<option value="">${t('allLangs')}</option>` + Array.from(langs).sort().map(l=>`<option ${l===current?'selected':''}>${l}</option>`).join('');
      applyFilters(); applyI18n();
    }

    function applyFilters(){
      const q = ($('#search').value||'').toLowerCase();
      const lang = $('#languageFilter').value;
      const sort = $('#sort').value;

      let list = [...(STATE.repos||[])];
      if(q) list = list.filter(r => (r.name||'').toLowerCase().includes(q) || (r.description||'').toLowerCase().includes(q) || (r.topics||[]).join(' ').toLowerCase().includes(q));
      if(lang) list = list.filter(r => r.language === lang);
      if(sort==='updated') list.sort((a,b)=>new Date(b.pushed_at)-new Date(a.pushed_at));
      if(sort==='stars') list.sort((a,b)=>(b.stargazers_count||0)-(a.stargazers_count||0));
      if(sort==='name') list.sort((a,b)=>a.name.localeCompare(b.name));

      const grid = $('#repoGrid');
      grid.innerHTML = list.map(r => repoCard(r)).join('') || `<div class="notice">${LANG==='de'?'Keine Repositories gefunden.':'No repositories found.'}</div>`;

      grid.querySelectorAll('.repo').forEach(el=>{
        el.addEventListener('click', (ev)=>{
          if(ev.target.closest('a')) return;
          loadRepo(el.getAttribute('data-owner'), el.getAttribute('data-repo'));
        });
      });
    }

    function langColor(lang){
      const map={'JavaScript':'#f1e05a','TypeScript':'#3178c6','Python':'#3572A5','HTML':'#e34c26','CSS':'#563d7c','Shell':'#89e051','Go':'#00ADD8','Rust':'#dea584','C':'#555555','C#':'#178600','C++':'#f34b7d','Java':'#b07219','PHP':'#4F5D95','Ruby':'#701516','Kotlin':'#A97BFF','Swift':'#F05138','Vue':'#41B883','Svelte':'#FF3E00','Dart':'#00B4AB','R':'#198CE7'};
      return map[lang]||'#8b949e';
    }

    function repoCard(r){
      const langDot = r.language ? `<span class="dot" style="width:8px;height:8px;border-radius:50%;background:${langColor(r.language)}"></span> ${r.language}` : '';
      const updatedText = LANG==='de'?'Aktualisiert':'Updated';
      return `<div class="repo" role="button" tabindex="0" data-owner="${r.owner.login}" data-repo="${r.name}">
        <h4 title="${r.full_name}">
          <a href="${r.html_url}" target="_blank" rel="noopener" style="text-decoration:none;color:inherit">${r.name}</a>
        </h4>
        <div class="meta">
          <span>‚òÖ ${r.stargazers_count||0}</span>
          <span>‚ëÇ ${r.forks_count||0}</span>
          <span>‚óè ${r.open_issues_count||0}</span>
          <span>${langDot}</span>
          <span>${updatedText} ${new Intl.DateTimeFormat(LANG==='de'?'de-DE':'en-US',{dateStyle:'medium'}).format(new Date(r.pushed_at))}</span>
        </div>
        <div style="color:var(--muted);font-size:13px;min-height:36px">${escapeHtml(r.description||'')}</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          ${(r.topics||[]).slice(0,6).map(t=>`<span class='chip'>#${t}</span>`).join('')}
        </div>
      </div>`;
    }

    async function loadRepo(owner, repo){
      hideError('#repoError');
      $('#currentRepoTitle').textContent = `${owner}/${repo}`;
      $('#openRepoBtn').href = `https://github.com/${owner}/${repo}`;
      $('#openProfileBtn').href = STATE.profile?.html_url || `https://github.com/${STATE.username}`;
      $('#readme').innerHTML = LANG==='de'?'Lade README‚Ä¶':'Loading README‚Ä¶';
      $('#commits').innerHTML = '';
      $('#repoMeta').textContent = '‚Äî';
      applyI18n();
      try{
        const [r, readme, commits] = await Promise.all([
          api(`/repos/${owner}/${repo}`),
          api(`/repos/${owner}/${repo}/readme`).catch(()=>null),
          api(`/repos/${owner}/${repo}/commits?per_page=5`).catch(()=>[])
        ]);
        STATE.current = r;
        $('#m_stars').textContent = r.stargazers_count||0;
        $('#m_forks').textContent = r.forks_count||0;
        $('#m_issues').textContent = r.open_issues_count||0;
        $('#m_updated').textContent = new Date(r.pushed_at).toLocaleString(LANG==='de'?'de-DE':'en-US');
        const visibility = r.private ? (LANG==='de'?'Privat':'Private') : (LANG==='de'?'√ñffentlich':'Public');
        $('#repoMeta').textContent = `${r.language||'‚Äî'} ‚Ä¢ ${r.license?.spdx_id||'No license'} ‚Ä¢ ${LANG==='de'?'Sichtbarkeit':'Visibility'}: ${visibility}`;

        if(readme && readme.download_url){
          const md = await fetch(readme.download_url).then(r=>r.text());
          $('#readme').innerHTML = marked.parse(md, {mangle:false, headerIds:false});
          rewriteRelativeLinks($('#readme'), `https://raw.githubusercontent.com/${owner}/${repo}/HEAD/`, `https://github.com/${owner}/${repo}/blob/HEAD/`);
        }else{
          $('#readme').innerHTML = `<div class="notice">${LANG==='de'?'Keine README gefunden.':'No README found.'}</div>`;
        }
        renderCommits(commits);
        applyI18n();
      }catch(e){
        showError('#repoError', `${t('errRepo')} ${e.message||''}`);
      }
    }

    function renderCommits(list){
      const box = $('#commits');
      if(!list || !list.length){ box.innerHTML = `<div class="notice">${LANG==='de'?'Keine Commits gefunden.':'No commits found.'}</div>`; return; }
      box.innerHTML = list.map(c=>{
        const msg = escapeHtml(c.commit?.message?.split('\n')[0]||'');
        const author = escapeHtml(c.commit?.author?.name||'');
        const when = new Date(c.commit?.author?.date||Date.now());
        const link = c.html_url;
        return `<div style="display:flex;justify-content:space-between;gap:10px;border-bottom:1px solid var(--border);padding:8px 0">
          <div>
            <div style="font-weight:600">${msg}</div>
            <div style="font-size:12px;color:var(--muted)">${author} ‚Ä¢ ${when.toLocaleString(LANG==='de'?'de-DE':'en-US')}</div>
          </div>
          <a class="btn small" target="_blank" rel="noopener" href="${link}">Diff</a>
        </div>`;
      }).join('');
    }

    function rewriteRelativeLinks(container, rawBase, blobBase){
      container.querySelectorAll('img').forEach(img=>{
        const src = img.getAttribute('src')||'';
        if(src && !/^(https?:)?\/\//.test(src)) img.src = rawBase + src;
      });
      container.querySelectorAll('a').forEach(a=>{
        const href = a.getAttribute('href')||'';
        if(!href || href.startsWith('#')) return;
        if(!/^(https?:)?\/\//.test(href)) a.href = blobBase + href;
        a.target = '_blank'; a.rel = 'noopener';
      });
    }
    const escapeHtml = s=> s.replace(/[&<>\"']/g, c=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[c]));
    function showError(sel,msg){ const b=$(sel); b.textContent=msg; b.style.display='block'; }
    function hideError(sel){ const b=$(sel); b.textContent=''; b.style.display='none'; }

    $('#langBtn').addEventListener('click', ()=>{
      LANG = (LANG==='de'?'en':'de'); applyI18n();
      if(STATE.profile) renderProfile();
      if(STATE.repos.length) applyFilters();
      if(STATE.current) loadRepo(STATE.current.owner.login, STATE.current.name);
    });
    $('#infoBtn').addEventListener('click', ()=> { applyI18n(); $('#infoModal').showModal(); });
    $('#closeInfo').addEventListener('click', ()=> $('#infoModal').close());

    $('#saveToken').addEventListener('click', ()=>{
      const tok = $('#tokenInput').value.trim();
      setToken(tok); applyI18n();
      $('#tokenStatus').className = 'ok'; $('#tokenStatus').textContent = t('tokenSaved');
      $('#authStat').textContent = 'Auth: ON';
    });
    $('#clearToken').addEventListener('click', ()=>{
      clearToken(); $('#tokenInput').value=''; applyI18n();
      $('#tokenStatus').className = 'notice'; $('#tokenStatus').textContent = t('tokenCleared');
      $('#authStat').textContent = 'Auth: OFF';
    });
    $('#hideToken').addEventListener('click', ()=>{
      const inp = $('#tokenInput'); inp.type = (inp.type==='password'?'text':'password');
      $('#tokenStatus').className = 'notice'; $('#tokenStatus').textContent = t('tokenHidden');
    });

    $('#loadBtn').addEventListener('click', ()=> loadUser($('#usernameInput').value.trim()));
    $('#usernameInput').addEventListener('keydown', (e)=>{ if(e.key==='Enter') loadUser($('#usernameInput').value.trim()); });
    $('#embedBtn').addEventListener('click', ()=>{
      const url = $('#repoUrlInput').value.trim();
      const m = url.match(/github\.com\/([^\/]+)\/([^\/#?]+)(?:[\/#?].*)?$/i);
      if(!m){ alert(LANG==='de'?'Ung√ºltige URL. Format: https://github.com/OWNER/REPO':'Invalid URL. Use https://github.com/OWNER/REPO'); return; }
      loadRepo(m[1], m[2]);
    });
    $('#search').addEventListener('input', applyFilters);
    $('#languageFilter').addEventListener('change', applyFilters);
    $('#sort').addEventListener('change', applyFilters);

    const iBtn = $('#iBtn'); const iPopover = $('#iPopover');
    function closeIPop(){ iPopover.style.display='none'; iBtn.setAttribute('aria-expanded','false'); }
    function openIPop(){ applyI18n(); iPopover.style.display='block'; iBtn.setAttribute('aria-expanded','true'); }
    iBtn.addEventListener('click', (e)=>{ e.stopPropagation(); (iPopover.style.display==='block'?closeIPop():openIPop()); });
    document.addEventListener('click', (e)=>{ if(!iPopover.contains(e.target) && e.target!==iBtn) closeIPop(); });

    document.addEventListener('DOMContentLoaded', ()=>{
      LANG = (navigator.language||'').toLowerCase().startsWith('de') ? 'de' : 'en'; applyI18n();
      // mask token field; prefill from storage
      $('#tokenInput').type = 'password'; const tok = authToken(); if(tok) $('#tokenInput').value = tok;
      const params = new URLSearchParams(location.search);
      const defaultUser = (params.get('user')||'bylickilabs').trim();
      $('#usernameInput').value = defaultUser;
      loadUser(defaultUser);
    });
  </script>
  

<footer class="footer">
  <div class="footer-content">
    <span id="footerText"><!--Language-Switcher--></span>
  </div>
</footer>
  

</body>
</html>
